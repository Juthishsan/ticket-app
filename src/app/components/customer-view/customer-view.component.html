<div class="container fade-in" style="padding-top: 2rem; padding-bottom: 2rem;">
  <div class="form-header">
    <h1>Raise a Ticket</h1>
    <p>Describe your issue and we'll get right on it.</p>
  </div>

  <div class="card ticket-form-card">
    <div class="form-group">
      <label for="name">Full Name</label>
      <input type="text" id="name" [(ngModel)]="customerName" placeholder="e.g. John Doe">
    </div>

    <div class="form-group">
      <label for="email">Email Address</label>
      <input type="email" id="email" [(ngModel)]="email" placeholder="john@example.com">
    </div>

    <div class="form-group">
      <label for="title">Issue Title</label>
      <input type="text" id="title" [(ngModel)]="title" placeholder="Brief summary of the issue">
    </div>

    <div class="form-group">
      <label for="description">Description</label>
      <textarea id="description" rows="5" [(ngModel)]="description" placeholder="Detailed explanation..."></textarea>
    </div>

    <div class="form-group">
      <label>Attachments (Images)</label>
      <div class="file-upload-wrapper">
        <input type="file" (change)="onFileSelected($event)" multiple accept="image/*" id="file-upload" class="file-input">
        <label for="file-upload" class="file-label">
          <span>+ Add Images</span>
        </label>
      </div>
      
      <div class="image-previews" *ngIf="images().length > 0">
        <div class="preview-item" *ngFor="let img of images(); let i = index">
          <img [src]="img" alt="Preview">
          <button class="remove-btn" (click)="removeImage(i)">×</button>
        </div>
      </div>
    </div>

    <div class="form-actions">
      <button class="btn btn-primary" (click)="submitTicket()" [disabled]="isSubmitting()">
        {{ isSubmitting() ? 'Submitting...' : 'Submit Ticket' }}
      </button>
    </div>

    <div class="success-message fade-in" *ngIf="successMessage()">
      <div class="success-icon">✅</div>
      <h3>{{ successMessage() }}</h3>
      
      <div class="ticket-id-box" *ngIf="createdTicketId()">
        <p>Please save your Ticket ID to track status:</p>
        <div class="id-display">
          <code>{{ createdTicketId() }}</code>
        </div>
        <p class="warning-text">⚠️ You will need this ID to check updates.</p>
        
        <div class="success-actions">
           <!-- Simple link to track page pre-filled? We can use query params later if needed -->
           <a routerLink="/track" [queryParams]="{id: createdTicketId()}" class="btn btn-primary btn-sm">Track Now</a>
        </div>
      </div>
    </div>
  </div>
</div>
